// Copyright (c) 2000-2012 by Gary Johnson

function getWhich()
{return document.regtest1.inwhat1.value;}
function getIt()
{var whatStr=new String();var iwhat=getWhich();if(!iwhat)
{what=returnInnerHTML('it');whatStr=what;}
else
{whatStr=iwhat;}
return whatStr;}
function displayOP(results,testname,iwhat,whatStr)
{if(results>-1)
{if(iwhat)
{changeInnerHTML("theop",returnInnerHTML("theop")+"<br>"+results+" results "+testname+" TestRegExp pass on "+whatStr);}
else
{changeInnerHTML("theop",returnInnerHTML("theop")+"<br>"+results+" results "+testname+"TestRegExp pass on it");}}
else
{if(iwhat)
{changeInnerHTML("theop",returnInnerHTML("theop")+"<br>"+results+" results "+testname+" TestRegExp failed on "+whatStr);}
else
{changeInnerHTML("theop",returnInnerHTML("theop")+"<br>"+results+" results "+testname+"TestRegExp failed on it");}}}
function displayOP2(str1,str2)
{changeInnerHTML("theop2",returnInnerHTML("theop2")+"<br>"+str1+" <-1 2-> "+str2);}
function displayOP1(str1)
{changeInnerHTML("theop",returnInnerHTML("theop")+"<br>"+str1);}
function clearOP()
{changeInnerHTML("theop","");changeInnerHTML("theop2","");}
function stripChars(pattern,str)
{return str.replace(pattern,"")}
function stripNonDigits(str)
{return str.replace(/[^0-9]/g,"")}
function hasLetter(str)
{var letterexp=/[a-z]/i
return letterexp.test(str)}
function hasChar(str)
{var charexp=/./return charexp.test(str)}
function TestRegExp1()
{var whatStr=getIt();var results=whatStr.replace(/(Y)|(e)/g,"");displayOP(results,"HR : ",getWhich(),whatStr);displayOP2(RegExp.leftContext,RegExp.rightContext);displayOP2(RegExp.lastMatch,RegExp.index);}
function TestRegExp2(what)
{var whatStr=getIt();switch(what)
{case"txt":re=/^[a-z ]*$/i
break;case"num":re=/^[\d\.]*$/break;case"int":re=/^\d*$/break;case"adate":re=/^(()|(\d{1,2}(\/|-)\d{1,2}(\/|-)\d{2,4}))$/break;case"email":re=/^[a-z\d\.\-_]+@[a-z\d\.\-_]{2,}\.[a-z]{2,10}$/i
break;case"alnum":re=/^[\w ]*$/i
break;case"curr":re=/^\$?\d*,?\.?\d{0,2}$/i
break;case"addr":re=/^[\w- \.,#]*$/gi
break;case"name":re=/^[a-z,\-\. ]*$/gi
break;case"free":re=/^[\w\-\+\(\)\[\]\\/&, ]*$/i
break;case"nobadsql":re=/((delete|drop|update|replace|kill|lock) )/gi
invertResult=true;break;case"notnull":re=/.+/break;default:re=/^[\w\-\+\(\)\[\]\\/&, ]*$/i}
var results=re.test(whatStr);displayOP(results,what+" ",getWhich(),whatStr);}
function TestRegExp3(what)
{var newExpr="4,312,000.+1,000.00000009";RegExp.lastIndex=0;var re3=/(.*?\d+)(,)(\d{3}.*?)/;var a;while(a=re3.exec(newExpr))
{displayOP1("newExpr "+newExpr);displayOP1(" lC "+RegExp.leftContext+" rC "+RegExp.rightContext);displayOP1(" lM "+RegExp.lastMatch+" lI "+RegExp.lastIndex);displayOP1(" O1 "+stripChars(",",RegExp.lastMatch)+RegExp.rightContext);newExpr=stripChars(",",RegExp.lastMatch)+RegExp.rightContext;}
displayOP1("Final newExpr "+newExpr);}
function TestRegExp4()
{var whatStr=getIt();var results=whatStr.search(/\(HR\)/i);if(results==-1)
{alert("exiting,just write this out")
return;}
var sfirst=RegExp.leftContext;+"<hr>";displayOP1("sfirst{"+sfirst+"}");var snext=RegExp.rightContext;displayOP1("snext{"+snext+"}");RegExp.lastIndex=0;var r=/\(b class.+\/b\)/;var a='';var strOut="";while((a=r.exec(snext))!=null)
{strOut="";for(var i=0;i<a.length;i++)
{strOut+=" ["+i+"] "+a[i];}
displayOP1("sout ");displayOP1(strOut);snext=RegExp.rightContext;}}
function TestRegExp5(what)
{var sBingo="Calling b7 i20 n33, anybody win yet?";RegExp.lastIndex=0;var r=/([bingo])(\d{1,2})/g;var a=r.exec(sBingo)
a=r.exec(sBingo);var strOut="";for(var i=0;i<a.length;i++)
{strOut+=" ["+i+"] "+a[i];}
displayOP1(" -- out "+strOut+" -- in "+sBingo+" exp "+r);displayOP2(RegExp.leftContext,RegExp.rightContext);displayOP2(RegExp.lastMatch,RegExp.lastIndex);}